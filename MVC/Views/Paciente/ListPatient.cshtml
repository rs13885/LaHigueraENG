@model Entidades.Models.Paciente;

@{
    Layout = "../Shared/_Layout.cshtml";
}

<div class="container text-center">
    @if (Enumerable.Count(ViewBag.Pacientes) > 0)
    {
    <h1>List of Patients</h1>
    <br/>
    <div class="table-responsive">
        <table class="table table-hover" id="patients_list">
            <thead>
                <tr>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">DNI</th>
                    <th scope="col">Date of birth</th>
                    <th scope="col">Gender</th>
                    <th scope="col">Place of attention</th>
                    <th scope="col">Date of entry</th>
                    <th scope="col">Is active?</th>
                    <th scope="col">View</th>
                </tr>
            </thead>
            <tbody>
            @foreach (Entidades.Models.Paciente paciente in ViewBag.Pacientes)
            {
                    <tr>
                        <td>@paciente.Nombre</td>
                        <td>@paciente.Apellido</td>
                        <td>@paciente.Dni</td>
                        <td>@paciente.FechaNac</td>
                        <td>@paciente.Sexo</td>
                        <td>@paciente.ParajeAtencion</td>
                        <td>@paciente.FechaAlta.ToString().Split(" ")[0]</td>
                        @if (@paciente.FlgActivo == 1)
                        {
                            <td class="bg-success">YES</td>
                        }else{
                            <td class="bg-secondary">NO</td>
                        }
                            <td class="text-center"><a asp-action="viewDetails" asp-route-id="@paciente.Id"><img src="~/icons/eye.svg" /></a> <a data-bs-toggle="tooltip" data-bs-title="Export medical history" asp-action="ExportDataToPdf" asp-route-id="@paciente.Id"><img src="~/icons/pdf.svg" /></a></td>
                    </tr>
            }
            <tfoot>
                <tr>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">DNI</th>
                    <th scope="col">Date of birth</th>
                    <th scope="col">Gender</th>
                    <th scope="col">Place of attention</th>
                    <th scope="col">Date of entry</th>
                    <th scope="col">Is active?</th>
                    <th scope="col">View</th>
                </tr>
            </tfoot>

            </tbody>
        </table>
    </div>

    } else
    {
        <h4>No active patients found in the database</h4>
    }
</div>
